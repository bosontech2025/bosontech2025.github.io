<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Timezone Converter</title>
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-color: #f8f9fa;
            --container-bg: #ffffff;
            --text-color: #212529;
            --light-gray: #e9ecef;
            --border-color: #dee2e6;
            --success-color: #28a745;
            --success-bg: #e9f5ec;
        }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .converter-container {
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 650px;
        }

        h2 {
            text-align: center;
            color: var(--text-color);
            margin-top: 0;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary-color);
        }

        input[type="date"],
        select {
            width: 100%;
            padding: 10px 15px;
            font-size: 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-sizing: border-box;
            background-color: white;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input[type="date"]:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
        }

        .timezone-selection {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .timezone-group {
            flex: 1;
        }

        #swapBtn {
            background: none;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin-top: 20px;
            transition: background-color 0.2s, border-color 0.2s, transform 0.1s;
        }

        #swapBtn:hover {
            background-color: var(--light-gray);
            border-color: var(--secondary-color);
        }

        #swapBtn:active {
            transform: scale(0.9) rotate(180deg);
        }

        #swapBtn svg {
            width: 20px;
            height: 20px;
            fill: var(--secondary-color);
            transition: fill 0.2s;
        }

        #swapBtn:hover svg {
            fill: var(--primary-color);
        }

        #time-selector {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
        }

        .time-button {
            padding: 10px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            background-color: var(--light-gray);
            color: var(--text-color);
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s, transform 0.1s;
        }

        .time-button:hover {
            background-color: #d3d9df;
        }

        .time-button:active {
            transform: scale(0.95);
        }

        .time-button.active {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        #convertBtn {
            width: 100%;
            padding: 12px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            background-color: var(--success-color);
            color: white;
            cursor: pointer;
            margin-top: 25px;
            transition: background-color 0.2s;
        }

        #convertBtn:hover {
            background-color: #218838;
        }

        #result {
            margin-top: 25px;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            background-color: var(--success-bg);
            color: var(--success-color);
            padding: 15px;
            border-radius: 8px;
            min-height: 25px;
        }
    </style>
</head>

<body>
    <div class="converter-container">
        <h2>Universal Timezone Converter</h2>

        <div class="input-group timezone-selection">
            <div class="timezone-group">
                <label for="fromTimezone">From:</label>
                <select id="fromTimezone"></select>
            </div>

            <button id="swapBtn" onclick="swapTimezones()" title="Swap Timezones">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z" />
                </svg>
            </button>

            <div class="timezone-group">
                <label for="toTimezone">To:</label>
                <select id="toTimezone"></select>
            </div>
        </div>

        <div class="input-group">
            <label for="date" id="dateLabel">1. Select Date:</label>
            <input type="date" id="date">
        </div>

        <div class="input-group">
            <label id="timeLabel">2. Select Time:</label>
            <div id="time-selector"></div>
        </div>

        <button id="convertBtn" onclick="convertTime()">Convert</button>
        <div id="result"></div>
    </div>

    <script>
        // --- MODIFIED: Added new timezones and sorted the list ---
        const timezones = [
            { city: "Phoenix", offset: -7, iana: "America/Phoenix" },
            { city: "Los Angeles", offset: -7, iana: "America/Los_Angeles" },
            { city: "Costa Rica", offset: -6, iana: "America/Costa_Rica" }, // Added
            { city: "New York", offset: -4, iana: "America/New_York" },
            { city: "London", offset: 1, iana: "Europe/London" },
            { city: "Paris", offset: 2, iana: "Europe/Paris" },
            { city: "Vietnam", offset: 7, iana: "Asia/Ho_Chi_Minh" }, // Added
            { city: "Singapore", offset: 8, iana: "Asia/Singapore" }, // Added
            { city: "Malaysia", offset: 8, iana: "Asia/Kuala_Lumpur" }, // Added
            { city: "Taipei", offset: 8, iana: "Asia/Taipei" },
            { city: "Kaohsiung", offset: 8, iana: "Asia/Taipei" },
            { city: "Tokyo", offset: 9, iana: "Asia/Tokyo" },
            { city: "Sydney", offset: 10, iana: "Australia/Sydney" }
        ];

        document.addEventListener('DOMContentLoaded', function () {
            populateTimezoneSelectors();
            setDefaultDate();
            createHourButtons();
            updateLabels();
        });

        function populateTimezoneSelectors() {
            const fromSelect = document.getElementById('fromTimezone');
            const toSelect = document.getElementById('toTimezone');

            timezones.forEach(tz => {
                const optionText = `${tz.city} (UTC${tz.offset >= 0 ? '+' : ''}${tz.offset})`;
                const option = new Option(optionText, tz.offset);
                option.dataset.iana = tz.iana;
                option.dataset.city = tz.city;
                fromSelect.add(option.cloneNode(true));
                toSelect.add(option);
            });

            // Set defaults: Phoenix -> Kaohsiung
            fromSelect.querySelector('option[data-city="Phoenix"]').selected = true;
            toSelect.querySelector('option[data-city="Kaohsiung"]').selected = true;

            fromSelect.addEventListener('change', updateLabels);
            toSelect.addEventListener('change', updateLabels);
        }

        function swapTimezones() {
            const fromSelect = document.getElementById('fromTimezone');
            const toSelect = document.getElementById('toTimezone');
            const tempValue = fromSelect.value;
            fromSelect.value = toSelect.value;
            toSelect.value = tempValue;
            updateLabels();
        }

        function getSelectedCity(selectorId) {
            const select = document.getElementById(selectorId);
            return select.options[select.selectedIndex].dataset.city;
        }

        function updateLabels() {
            const fromCity = getSelectedCity('fromTimezone');
            document.getElementById('dateLabel').textContent = `1. Select Date (${fromCity}):`;
            document.getElementById('timeLabel').textContent = `2. Select Time (${fromCity}):`;
        }

        function setDefaultDate() {
            const today = new Date();
            const year = today.getFullYear();
            const month = (today.getMonth() + 1).toString().padStart(2, '0');
            const day = today.getDate().toString().padStart(2, '0');
            document.getElementById('date').value = `${year}-${month}-${day}`;
        }

        function createHourButtons() {
            const container = document.getElementById('time-selector');
            for (let i = 1; i <= 24; i++) {
                const hour = i % 24;
                const button = document.createElement('button');
                button.classList.add('time-button');
                button.textContent = hour.toString().padStart(2, '0') + ":00";
                button.dataset.hour = hour;
                if (hour === 8) { button.classList.add('active'); }
                button.onclick = function () {
                    container.querySelectorAll('.time-button').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                };
                container.appendChild(button);
            }
        }

        function convertTime() {
            const dateInput = document.getElementById('date').value;
            const activeButton = document.querySelector('.time-button.active');

            if (!dateInput) { alert("Please select a date!"); return; }
            if (!activeButton) { alert("Please select a time!"); return; }

            const hourInput = parseInt(activeButton.dataset.hour);
            const fromSelect = document.getElementById('fromTimezone');
            const toSelect = document.getElementById('toTimezone');

            const fromOffset = parseFloat(fromSelect.value);
            const toIana = toSelect.options[toSelect.selectedIndex].dataset.iana;
            const toCity = toSelect.options[toSelect.selectedIndex].dataset.city;

            let [y, m, d] = dateInput.split('-').map(Number);

            let fromDateInUTC = new Date(Date.UTC(y, m - 1, d, hourInput, 0, 0));
            let baseTimestamp = fromDateInUTC.getTime() - (fromOffset * 3600 * 1000);
            let toDate = new Date(baseTimestamp);

            const weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const formatter = new Intl.DateTimeFormat('en-CA', {
                year: 'numeric', month: '2-digit', day: '2-digit',
                hour: '2-digit', minute: '2-digit',
                hour12: false,
                timeZone: toIana
            });

            const parts = formatter.formatToParts(toDate);
            const formattedParts = {};
            parts.forEach(({ type, value }) => formattedParts[type] = value);

            const hourForDate = formattedParts.hour === '24' ? 0 : parseInt(formattedParts.hour);
            const dateForWeekday = new Date(
                Date.UTC(formattedParts.year, formattedParts.month - 1, formattedParts.day, hourForDate, formattedParts.minute)
            );
            const kw = weekdays[dateForWeekday.getUTCDay()];

            const resultString = `${formattedParts.year}-${formattedParts.month}-${formattedParts.day} ${formattedParts.hour}:${formattedParts.minute}`;

            document.getElementById('result').innerText = `${toCity} Time: ${resultString} ${kw}`;
        }
    </script>
</body>

</html>